(function e$$0(q,r,p){function f(c,h){if(!r[c]){if(!q[c]){var b="function"==typeof require&&require;if(!h&&b)return b(c,!0);if(g)return g(c,!0);b=Error("Cannot find module '"+c+"'");throw b.code="MODULE_NOT_FOUND",b;}b=r[c]={exports:{}};q[c][0].call(b.exports,function(h){var b=q[c][1][h];return f(b?b:h)},b,b.exports,e$$0,q,r,p)}return r[c].exports}for(var g="function"==typeof require&&require,b=0;b<p.length;b++)f(p[b]);return f})({1:[function(v,q,r){function p(c,h){var b=g.parse.parse(c);return g.eval.eval(b,
h)}function f(c){if(c.expression){var h=f(c.expression);c=c.op[0];"p"===c&&(c="");return c+"( "+h+" )"}if(c.op){var h=f(c.rightSide),b=f(c.leftSide);return h+" "+c.op+" "+b}return c.rolls?c.x+c.mode+(1<c.min?c.min+"..":"")+c.max+":["+c.rolls.join(", ")+"]":c.toString()}var g={};q=v("./parser.js");v=v("./evaluate.js");g.parse=q.parse;g.eval=v.val;g.version="0.7.0";g.roll=p;g.statistics=function(c,h,b){"number"==typeof h&&(b=h,h={});h=h||{};b=b||1E3;var f=[],g;for(g=0;g<b;g++)f.push(p(c,h));c=f.reduce(function(c,
b){return c+b},0)/b;h=f.reduce(function(c,b){return c<b?c:b},f[0]);b=f.reduce(function(c,b){return c>b?c:b},f[0]);return{results:f,mean:c,min:parseInt(h.toFixed()),max:parseInt(b.toFixed())}};g.stringify=f;for(var b in g)r[b]=g[b]},{"./evaluate.js":2,"./parser.js":3}],2:[function(v,q,r){function p(b){var c=[];c[b]=!0;for(b=0;b<c.length;b++)c[b]=!0;return c}function f(b){var c;c=(c=b.args)||[];c=c.map(f);return g[b.op].apply(b,c)}var g={"static":function(){var b=this.value;return function(){return b}},
lookup:function(){var b=this.value;return function(c){return c[b]}},floor:function(b){return function(c){c=b(c);var h=new Number(Math.floor(c));h.op="floor";h.expression=c;return h}},ceil:function(b){return function(c){c=b(c);var h=new Number(Math.ceil(c));h.op="ceil";h.expression=c;return h}},round:function(b){return function(c){c=b(c);var h=new Number(Math.round(c));h.op="round";h.expression=c;return h}},d:function(b,c){return function(h){var f=b(h),k,g,s=p(f-1).map(function(){var b=c(h);k=b.min;
g=b.max;return b}),n=s.reduce(function(c,b){return c+b},0),n=new Number(n);n.rolls=s;n.min=k;n.max=g;n.x=f;n.mode="d";return n}},w:function(b,c){return function(h){var f=b(h),k,g,s=p(f-1).map(function(){var b=c(h),f=0;k=c.min;g=c.max;if(c.min===c.max)return b;for(;b===c.max;)f+=b,b=mimMax(h);return f}),n=s.reduce(function(c,b){return c+b},0),n=new Number(n);n.rolls=s;n.min=k;n.max=g;n.x=f;n.mode="w";return n}},random:function(b,c){return function(f){var g=Math.random(),k=c(f);f=b(f);g=Math.round((k-
f)*g+f);g=new Number(g);g.min=f;g.max=k;return g}},"+":function(b,c){return function(f){var g=b(f);f=c(f);var k;k=new Number(g+f);k.op="+";k.rightSide=g;k.leftSide=f;return k}},"-":function(b,c){return function(f){var g=b(f);f=c(f);var k;k=new Number(g-f);k.op="-";k.rightSide=g;k.leftSide=f;return k}},"*":function(b,c){return function(f){var g=b(f);f=c(f);var k;k=new Number(g*f);k.op="*";k.rightSide=g;k.leftSide=f;return k}},"/":function(b,c){return function(f){var g=b(f);f=c(f);var k;k=new Number(g/
f);k.op="/";k.rightSide=g;k.leftSide=f;return k}},paren_express:function(f){return function(c){c=f(c);outtots=new Number(c);outtots.op="paren_express";outtots.expression=c;return outtots}}};r.eval=function(b,c){c=c||{};return f(b)(c)};r.ops=g},{}],3:[function(v,q,r){q.exports=function(){function p(f,g,b,c){this.message=f;this.expected=g;this.found=b;this.location=c;this.name="SyntaxError";"function"===typeof Error.captureStackTrace&&Error.captureStackTrace(this,p)}(function(f,g){function b(){this.constructor=
f}b.prototype=g.prototype;f.prototype=new b})(p,Error);return{SyntaxError:p,parse:function(f){function g(a){var d=y[a],c,e;if(!d){for(c=a-1;!y[c];)c--;d=y[c];for(d={line:d.line,column:d.column,seenCR:d.seenCR};c<a;)e=f.charAt(c),"\n"===e?(d.seenCR||d.line++,d.column=1,d.seenCR=!1):"\r"===e||"\u2028"===e||"\u2029"===e?(d.line++,d.column=1,d.seenCR=!0):(d.column++,d.seenCR=!1),c++;y[a]=d}return d}function b(a,d){var c=g(a),e=g(d);return{start:{offset:a,line:c.line,column:c.column},end:{offset:d,line:e.line,
column:e.column}}}function c(a){e<t||(e>t&&(t=e,B=[]),B.push(a))}function h(){return q()}function q(){var a,c,f,b;a=e;c=s();c!==d?(f=v(),f!==d?(b=n(),b!==d?a=c={op:f,args:[c,b]}:(e=a,a=d)):(e=a,a=d)):(e=a,a=d);a===d&&(a=c=n(),a===d&&(a=c=k()));return a}function k(){var a,m,b;a=e;40===f.charCodeAt(e)?(m=R,e++):(m=d,0===l&&c(S));m!==d?(m=u(),m!==d?(m=q(),m!==d?(b=u(),b!==d?(41===f.charCodeAt(e)?(b=T,e++):(b=d,0===l&&c(U)),b!==d?a=m={op:"paren_express",args:[m]}:(e=a,a=d)):(e=a,a=d)):(e=a,a=d)):(e=a,
a=d)):(e=a,a=d);return a}function r(){var a,m;a=e;m=u();m!==d?(42===f.charCodeAt(e)?(m=V,e++):(m=d,0===l&&c(W)),m!==d?(m=u(),m!==d?a="*":(e=a,a=d)):(e=a,a=d)):(e=a,a=d);a===d&&(a=e,m=u(),m!==d?(47===f.charCodeAt(e)?(m=X,e++):(m=d,0===l&&c(Y)),m!==d?(m=u(),m!==d?a="/":(e=a,a=d)):(e=a,a=d)):(e=a,a=d));return a}function s(){var a,c,f,b;a=e;c=C();c!==d?(f=r(),f!==d?(b=s(),b!==d?a=c={op:f,args:[c,b]}:(e=a,a=d)):(e=a,a=d)):(e=a,a=d);a===d&&(a=e,c=k(),c!==d?(f=r(),f!==d?(b=s(),b!==d?a=c={op:f,args:[c,b]}:
(e=a,a=d)):(e=a,a=d)):(e=a,a=d),a===d&&(a=c=C(),a===d&&(a=c=k())));return a}function n(){var a,c,f,b;a=e;c=s();c!==d?(f=v(),f!==d?(b=n(),b!==d?a=c={op:f,args:[c,b]}:(e=a,a=d)):(e=a,a=d)):(e=a,a=d);a===d&&(a=c=s(),a===d&&(a=c=k()));return a}function v(){var a,b;a=e;b=u();b!==d?(43===f.charCodeAt(e)?(b=Z,e++):(b=d,0===l&&c($)),b!==d?(b=u(),b!==d?a="+":(e=a,a=d)):(e=a,a=d)):(e=a,a=d);a===d&&(a=e,b=u(),b!==d?(45===f.charCodeAt(e)?(b=D,e++):(b=d,0===l&&c(E)),b!==d?(b=u(),b!==d?a="-":(e=a,a=d)):(e=a,a=
d)):(e=a,a=d));return a}function C(){var a,c,b,f;a=e;c=x();c!==d?(b=F(),b!==d?(f=G(),f!==d?a=c={op:b,args:[c,f]}:(e=a,a=d)):(e=a,a=d)):(e=a,a=d);a===d&&(a=e,c=F(),c!==d?(b=G(),b!==d?a=c={op:c,args:[{op:"static",value:1},b]}:(e=a,a=d)):(e=a,a=d),a===d&&(c=H(),c!==d&&(c={op:"d",args:[{op:"static",value:1},c]}),a=c,a===d&&(a=c=x())));return a}function F(){var a;100===f.charCodeAt(e)?(a=aa,e++):(a=d,0===l&&c(ba));a===d&&(119===f.charCodeAt(e)?(a=ca,e++):(a=d,0===l&&c(da)));return a}function G(){var a;
a=H();a===d&&(a=x(),a!==d&&(a={op:"random",args:[{op:"static",args:[],value:1},a]}));return a}function H(){var a,b,g;a=e;b=x();b!==d?(f.substr(e,2)===I?(g=I,e+=2):(g=d,0===l&&c(ea)),g!==d?(g=x(),g!==d?a=b={op:"random",args:[b,g]}:(e=a,a=d)):(e=a,a=d)):(e=a,a=d);return a}function u(){var a,b;a=[];J.test(f.charAt(e))?(b=f.charAt(e),e++):(b=d,0===l&&c(K));for(;b!==d;)a.push(b),J.test(f.charAt(e))?(b=f.charAt(e),e++):(b=d,0===l&&c(K));return a}function x(){var a,b,g;l++;g=[];z.test(f.charAt(e))?(b=f.charAt(e),
e++):(b=d,0===l&&c(A));if(b!==d)for(;b!==d;)g.push(b),z.test(f.charAt(e))?(b=f.charAt(e),e++):(b=d,0===l&&c(A));else g=d;g!==d&&(g=parseInt(g.join(""),10));a=g;if(a===d)if(a=e,45===f.charCodeAt(e)?(g=D,e++):(g=d,0===l&&c(E)),g!==d){b=[];z.test(f.charAt(e))?(g=f.charAt(e),e++):(g=d,0===l&&c(A));if(g!==d)for(;g!==d;)b.push(g),z.test(f.charAt(e))?(g=f.charAt(e),e++):(g=d,0===l&&c(A));else b=d;b!==d?a=g=-1*parseInt(b.join(""),10):(e=a,a=d)}else e=a,a=d;l--;a===d&&0===l&&c(fa);b=a;b!==d&&(b={op:"static",
value:b});a=b;a===d&&(a=b=L(),a===d&&(a=e,b=M(),b!==d?(g=L(),g!==d?a=b={op:b,args:[g]}:(e=a,a=d)):(e=a,a=d),a===d&&(a=e,b=M(),b!==d?(g=k(),g!==d?a=b={op:b,args:g.args}:(e=a,a=d)):(e=a,a=d))));return a}function M(){var a;102===f.charCodeAt(e)?(a=ga,e++):(a=d,0===l&&c(ha));a!==d&&(a="floor");a===d&&(114===f.charCodeAt(e)?(a=ia,e++):(a=d,0===l&&c(ja)),a!==d&&(a="round"),a===d&&(99===f.charCodeAt(e)?(a=ka,e++):(a=d,0===l&&c(la)),a!==d&&(a="ceil")));return a}function L(){var a,b,g;a=e;91===f.charCodeAt(e)?
(b=ma,e++):(b=d,0===l&&c(na));if(b!==d){b=[];N.test(f.charAt(e))?(g=f.charAt(e),e++):(g=d,0===l&&c(O));if(g!==d)for(;g!==d;)b.push(g),N.test(f.charAt(e))?(g=f.charAt(e),e++):(g=d,0===l&&c(O));else b=d;b!==d?(93===f.charCodeAt(e)?(g=oa,e++):(g=d,0===l&&c(pa)),g!==d?a=b=b.join(""):(e=a,a=d)):(e=a,a=d)}else e=a,a=d;a!==d&&(a={op:"lookup",value:a});return a}var w=1<arguments.length?arguments[1]:{},d={},P={start:h},Q=h,R="(",S={type:"literal",value:"(",description:'"("'},T=")",U={type:"literal",value:")",
description:'")"'},V="*",W={type:"literal",value:"*",description:'"*"'},X="/",Y={type:"literal",value:"/",description:'"/"'},Z="+",$={type:"literal",value:"+",description:'"+"'},D="-",E={type:"literal",value:"-",description:'"-"'},aa="d",ba={type:"literal",value:"d",description:'"d"'},ca="w",da={type:"literal",value:"w",description:'"w"'},I="..",ea={type:"literal",value:"..",description:'".."'},J=/^[ ]/,K={type:"class",value:"[ ]",description:"[ ]"},ga="f",ha={type:"literal",value:"f",description:'"f"'},
ia="r",ja={type:"literal",value:"r",description:'"r"'},ka="c",la={type:"literal",value:"c",description:'"c"'},ma="[",na={type:"literal",value:"[",description:'"["'},N=/^[a-zA-Z 0-9]/,O={type:"class",value:"[a-zA-Z 0-9]",description:"[a-zA-Z 0-9]"},oa="]",pa={type:"literal",value:"]",description:'"]"'},fa={type:"other",description:"integer"},z=/^[0-9]/,A={type:"class",value:"[0-9]",description:"[0-9]"},e=0,y=[{line:1,column:1,seenCR:!1}],t=0,B=[],l=0;if("startRule"in w){if(!(w.startRule in P))throw Error("Can't start parsing from rule \""+
w.startRule+'".');Q=P[w.startRule]}w=Q();if(w!==d&&e===f.length)return w;w!==d&&e<f.length&&c({type:"end",description:"end of input"});throw function(a,b,c,d){function e(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function f(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,
"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0100-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1000-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d=Array(a.length),e;for(e=0;e<a.length;e++)d[e]=a[e].description;d=1<a.length?d.slice(0,-1).join(", ")+" or "+d[a.length-1]:d[0];e=b?'"'+c(b)+'"':"end of input";return"Expected "+d+
" but "+e+" found."}null!==b&&e(b);return new p(null!==a?a:f(b,c),b,c,d)}(null,B,t<f.length?f.charAt(t):null,t<f.length?b(t,t+1):b(t,t));}}}()},{}]},{},[1]);
