dice={version:"0.7.0",roll:function(h,g){var n=dice.parse.parse(h);return dice.eval.eval(n,g)},statistics:function(h,g,n){"number"==typeof g&&(n=g,g={});g=g||{};n=n||1E3;var e=[],b;for(b=0;b<n;b++)e.push(dice.roll(h,g));h=e.reduce(function(e,b){return e+b},0)/n;g=e.reduce(function(e,b){return e<b?e:b},e[0]);n=e.reduce(function(e,b){return e>b?e:b},e[0]);return{results:e,mean:h,min:parseInt(g.toFixed()),max:parseInt(n.toFixed())}},stringify_expression:function(h){var g=dice.stringify(h.expression);
h=h.op[0];"p"===h&&(h="");return h+"( "+g+" )"},stringify_op:function(h){var g=dice.stringify(h.rightSide),n=dice.stringify(h.leftSide);return g+" "+h.op+" "+n},stringify_rolls:function(h){return h.x+h.mode+(1<h.min?h.min+"..":"")+h.max+":["+h.rolls.join(", ")+"]"},stringify:function(h){return h.expression?dice.stringify_expression(h):h.op?dice.stringify_op(h):h.rolls?dice.stringify_rolls(h):h.toString()}};
dice.parse=function(){function h(g,h,e,b,u,q){this.message=g;this.expected=h;this.found=e;this.offset=b;this.line=u;this.column=q;this.name="SyntaxError"}(function(g,h){function e(){this.constructor=g}e.prototype=h.prototype;g.prototype=new e})(h,Error);return{SyntaxError:h,parse:function(g){function n(a){if(v!==a){v>a&&(v=0,B={line:1,column:1,seenCR:!1});var c=B,d,f;for(d=v;d<a;d++)f=g.charAt(d),"\n"===f?(c.seenCR||c.line++,c.column=1,c.seenCR=!1):"\r"===f||"\u2028"===f||"\u2029"===f?(c.line++,c.column=
1,c.seenCR=!0):(c.column++,c.seenCR=!1);v=a}return B}function e(a){d<y||(d>y&&(y=d,C=[]),C.push(a))}function b(){return u()}function u(){var a,c,e,b;a=d;c=w();c!==f?(e=p(),e!==f?(b=s(),b!==f?a=c={op:e,args:[c,b]}:(d=a,a=k)):(d=a,a=k)):(d=a,a=k);a===f&&(a=c=s(),a===f&&(a=c=q()));return a}function q(){var a,c,b;a=d;40===g.charCodeAt(d)?(c=S,d++):(c=f,0===m&&e(T));c!==f?(c=r(),c!==f?(c=u(),c!==f?(b=r(),b!==f?(41===g.charCodeAt(d)?(b=U,d++):(b=f,0===m&&e(V)),b!==f?a=c={op:"paren_express",args:[c]}:(d=
a,a=k)):(d=a,a=k)):(d=a,a=k)):(d=a,a=k)):(d=a,a=k);return a}function l(){var a,c;a=d;c=r();c!==f?(42===g.charCodeAt(d)?(c=W,d++):(c=f,0===m&&e(X)),c!==f?(c=r(),c!==f?a="*":(d=a,a=k)):(d=a,a=k)):(d=a,a=k);a===f&&(a=d,c=r(),c!==f?(47===g.charCodeAt(d)?(c=Y,d++):(c=f,0===m&&e(Z)),c!==f?(c=r(),c!==f?a="/":(d=a,a=k)):(d=a,a=k)):(d=a,a=k));return a}function w(){var a,c,e,b;a=d;c=D();c!==f?(e=l(),e!==f?(b=w(),b!==f?a=c={op:e,args:[c,b]}:(d=a,a=k)):(d=a,a=k)):(d=a,a=k);a===f&&(a=d,c=q(),c!==f?(e=l(),e!==
f?(b=w(),b!==f?a=c={op:e,args:[c,b]}:(d=a,a=k)):(d=a,a=k)):(d=a,a=k),a===f&&(a=c=D(),a===f&&(a=c=q())));return a}function s(){var a,c,e,b;a=d;c=w();c!==f?(e=p(),e!==f?(b=s(),b!==f?a=c={op:e,args:[c,b]}:(d=a,a=k)):(d=a,a=k)):(d=a,a=k);a===f&&(a=c=w(),a===f&&(a=c=q()));return a}function p(){var a,c;a=d;c=r();c!==f?(43===g.charCodeAt(d)?(c=$,d++):(c=f,0===m&&e(aa)),c!==f?(c=r(),c!==f?a="+":(d=a,a=k)):(d=a,a=k)):(d=a,a=k);a===f&&(a=d,c=r(),c!==f?(45===g.charCodeAt(d)?(c=E,d++):(c=f,0===m&&e(F)),c!==f?
(c=r(),c!==f?a="-":(d=a,a=k)):(d=a,a=k)):(d=a,a=k));return a}function D(){var a,c,e,b;a=d;c=x();c!==f?(e=G(),e!==f?(b=H(),b!==f?a=c={op:e,args:[c,b]}:(d=a,a=k)):(d=a,a=k)):(d=a,a=k);a===f&&(a=d,c=G(),c!==f?(e=H(),e!==f?a=c={op:c,args:[{op:"static",value:1},e]}:(d=a,a=k)):(d=a,a=k),a===f&&(c=I(),c!==f&&(c={op:"d",args:[{op:"static",value:1},c]}),a=c,a===f&&(a=c=x())));return a}function G(){var a;100===g.charCodeAt(d)?(a=ba,d++):(a=f,0===m&&e(ca));a===f&&(119===g.charCodeAt(d)?(a=da,d++):(a=f,0===m&&
e(ea)));return a}function H(){var a;a=I();a===f&&(a=x(),a!==f&&(a={op:"random",args:[{op:"static",args:[],value:1},a]}));return a}function I(){var a,c,b;a=d;c=x();c!==f?(g.substr(d,2)===J?(b=J,d+=2):(b=f,0===m&&e(fa)),b!==f?(b=x(),b!==f?a=c={op:"random",args:[c,b]}:(d=a,a=k)):(d=a,a=k)):(d=a,a=k);return a}function r(){var a,c;a=[];K.test(g.charAt(d))?(c=g.charAt(d),d++):(c=f,0===m&&e(L));for(;c!==f;)a.push(c),K.test(g.charAt(d))?(c=g.charAt(d),d++):(c=f,0===m&&e(L));return a}function x(){var a,c,
b;m++;b=[];z.test(g.charAt(d))?(c=g.charAt(d),d++):(c=f,0===m&&e(A));if(c!==f)for(;c!==f;)b.push(c),z.test(g.charAt(d))?(c=g.charAt(d),d++):(c=f,0===m&&e(A));else b=k;b!==f&&(b=parseInt(b.join(""),10));a=b;if(a===f)if(a=d,45===g.charCodeAt(d)?(b=E,d++):(b=f,0===m&&e(F)),b!==f){c=[];z.test(g.charAt(d))?(b=g.charAt(d),d++):(b=f,0===m&&e(A));if(b!==f)for(;b!==f;)c.push(b),z.test(g.charAt(d))?(b=g.charAt(d),d++):(b=f,0===m&&e(A));else c=k;c!==f?a=b=-1*parseInt(c.join(""),10):(d=a,a=k)}else d=a,a=k;m--;
a===f&&0===m&&e(ga);c=a;c!==f&&(c={op:"static",value:c});a=c;a===f&&(a=c=M(),a===f&&(a=d,c=N(),c!==f?(b=M(),b!==f?a=c={op:c,args:[b]}:(d=a,a=k)):(d=a,a=k),a===f&&(a=d,c=N(),c!==f?(b=q(),b!==f?a=c={op:c,args:b.args}:(d=a,a=k)):(d=a,a=k))));return a}function N(){var a;102===g.charCodeAt(d)?(a=ha,d++):(a=f,0===m&&e(ia));a!==f&&(a="floor");a===f&&(114===g.charCodeAt(d)?(a=ja,d++):(a=f,0===m&&e(ka)),a!==f&&(a="round"),a===f&&(99===g.charCodeAt(d)?(a=la,d++):(a=f,0===m&&e(ma)),a!==f&&(a="ceil")));return a}
function M(){var a,c,b;a=d;91===g.charCodeAt(d)?(c=na,d++):(c=f,0===m&&e(oa));if(c!==f){c=[];O.test(g.charAt(d))?(b=g.charAt(d),d++):(b=f,0===m&&e(P));if(b!==f)for(;b!==f;)c.push(b),O.test(g.charAt(d))?(b=g.charAt(d),d++):(b=f,0===m&&e(P));else c=k;c!==f?(93===g.charCodeAt(d)?(b=pa,d++):(b=f,0===m&&e(qa)),b!==f?a=c=c.join(""):(d=a,a=k)):(d=a,a=k)}else d=a,a=k;a!==f&&(a={op:"lookup",value:a});return a}var t=1<arguments.length?arguments[1]:{},f={},Q={start:b},R=b,k=f,S="(",T={type:"literal",value:"(",
description:'"("'},U=")",V={type:"literal",value:")",description:'")"'},W="*",X={type:"literal",value:"*",description:'"*"'},Y="/",Z={type:"literal",value:"/",description:'"/"'},$="+",aa={type:"literal",value:"+",description:'"+"'},E="-",F={type:"literal",value:"-",description:'"-"'},ba="d",ca={type:"literal",value:"d",description:'"d"'},da="w",ea={type:"literal",value:"w",description:'"w"'},J="..",fa={type:"literal",value:"..",description:'".."'},K=/^[ ]/,L={type:"class",value:"[ ]",description:"[ ]"},
ha="f",ia={type:"literal",value:"f",description:'"f"'},ja="r",ka={type:"literal",value:"r",description:'"r"'},la="c",ma={type:"literal",value:"c",description:'"c"'},na="[",oa={type:"literal",value:"[",description:'"["'},O=/^[a-zA-Z 0-9]/,P={type:"class",value:"[a-zA-Z 0-9]",description:"[a-zA-Z 0-9]"},pa="]",qa={type:"literal",value:"]",description:'"]"'},ga={type:"other",description:"integer"},z=/^[0-9]/,A={type:"class",value:"[0-9]",description:"[0-9]"},d=0,v=0,B={line:1,column:1,seenCR:!1},y=0,
C=[],m=0;if("startRule"in t){if(!(t.startRule in Q))throw Error("Can't start parsing from rule \""+t.startRule+'".');R=Q[t.startRule]}t=R();if(t!==f&&d===g.length)return t;t!==f&&d<g.length&&e({type:"end",description:"end of input"});throw function(a,c,b){function d(a){var b=1;for(a.sort(function(a,b){return a.description<b.description?-1:a.description>b.description?1:0});b<a.length;)a[b-1]===a[b]?a.splice(b,1):b++}function f(a,b){function c(a){function b(a){return a.charCodeAt(0).toString(16).toUpperCase()}
return a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,function(a){return"\\x0"+b(a)}).replace(/[\x10-\x1F\x80-\xFF]/g,function(a){return"\\x"+b(a)}).replace(/[\u0180-\u0FFF]/g,function(a){return"\\u0"+b(a)}).replace(/[\u1080-\uFFFF]/g,function(a){return"\\u"+b(a)})}var d=Array(a.length),e;for(e=0;e<a.length;e++)d[e]=a[e].description;d=1<a.length?d.slice(0,-1).join(", ")+
" or "+d[a.length-1]:d[0];e=b?'"'+c(b)+'"':"end of input";return"Expected "+d+" but "+e+" found."}var e=n(b),u=b<g.length?g.charAt(b):null;null!==c&&d(c);return new h(null!==a?a:f(c,u),c,u,b,e.line,e.column)}(null,C,y);}}}();
dice.eval=function(){function h(e){var b=[];b[e]=!0;for(e=0;e<b.length;e++)b[e]=!0;return b}function g(e){var b;b=(b=e.args)||[];b=b.map(g);return n[e.op].apply(e,b)}var n={"static":function(){var e=this.value;return function(){return e}},lookup:function(){var e=this.value;return function(b){return b[e]}},floor:function(e){return function(b){b=e(b);var g=new Number(Math.floor(b));g.op="floor";g.expression=b;return g}},ceil:function(e){return function(b){b=e(b);var g=new Number(Math.ceil(b));g.op=
"ceil";g.expression=b;return g}},round:function(e){return function(b){b=e(b);var g=new Number(Math.round(b));g.op="round";g.expression=b;return g}},d:function(e,b){return function(g){var q=e(g),l,n,s=h(q-1).map(function(){var e=b(g);l=e.min;n=e.max;return e}),p=s.reduce(function(b,e){return b+e},0),p=new Number(p);p.rolls=s;p.min=l;p.max=n;p.x=q;p.mode="d";return p}},w:function(e,b){return function(g){var q=e(g),l,n,s=h(q-1).map(function(){var e=b(g),h=0;l=b.min;n=b.max;if(b.min===b.max)return e;
for(;e===b.max;)h+=e,e=mimMax(g);return h}),p=s.reduce(function(b,e){return b+e},0),p=new Number(p);p.rolls=s;p.min=l;p.max=n;p.x=q;p.mode="w";return p}},random:function(e,b){return function(g){var h=Math.random(),l=b(g);g=e(g);h=Math.round((l-g)*h+g);h=new Number(h);h.min=g;h.max=l;return h}},"+":function(e,b){return function(g){var h=e(g);g=b(g);var l;l=new Number(h+g);l.op="+";l.rightSide=h;l.leftSide=g;return l}},"-":function(e,b){return function(g){var h=e(g);g=b(g);var l;l=new Number(h-g);l.op=
"-";l.rightSide=h;l.leftSide=g;return l}},"*":function(e,b){return function(g){var h=e(g);g=b(g);var l;l=new Number(h*g);l.op="*";l.rightSide=h;l.leftSide=g;return l}},"/":function(e,b){return function(g){var h=e(g);g=b(g);var l;l=new Number(h/g);l.op="/";l.rightSide=h;l.leftSide=g;return l}},paren_express:function(e){return function(b){b=e(b);outtots=new Number(b);outtots.op="paren_express";outtots.expression=b;return outtots}}};return{eval:function(e,b){b=b||{};return g(e)(b)},ops:n}}();
